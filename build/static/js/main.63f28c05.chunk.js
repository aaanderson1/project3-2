(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,n,t){},105:function(e,n,t){},106:function(e,n,t){},107:function(e,n,t){},108:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),i=t(29),r=t(24),c=t(19),s=t(7),l=t(8),u=t(14),m=t(12),g=t(13),h=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"shower_though_secret";Object(s.a)(this,e),this.tokenName=n,this.token=null,this.loadToken()}return Object(l.a)(e,[{key:"loadToken",value:function(){var e=window.localStorage.getItem(this.tokenName);if(e){var n=JSON.parse(e);if(n.token&&n.dateTimeString){var t=new Date(n.dateTimeString);new Date<t&&n.token&&(this.token=n.token)}}}},{key:"saveToken",value:function(e){this.token=e;var n=new Date;n.setMinutes(n.getMinutes()+60),window.localStorage.setItem(this.tokenName,JSON.stringify({token:this.token,dateTimeString:n.toISOString()}))}}]),e}(),p=(t(48),function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(g.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=new h;null!==n.token?fetch("".concat(window.location.origin.toString(),"/api/anon/").concat(n.token)).then(function(e){return e.json()}).then(function(t){t.length>0&&t[0]._id===n.token?(console.log(t),e.props.history.push("messages")):e.props.history.push("login")}):this.props.history.push("login")}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),n}(o.a.Component)),d=t(23),f=t(109),v=t(113),E=["grinning","neutral","rolling","slightly","sunglasses","thinking"],b=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(u.a)(this,Object(m.a)(n).call(this,e))).state={avatar:E[Math.floor(Math.random()*E.length)]},t.login=t.login.bind(Object(d.a)(t)),t}return Object(g.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){null===(new h).token||this.props.onComplete()}},{key:"login",value:function(){var e=this;return fetch("".concat(window.location.origin.toString(),"/api/anon"),{method:"POST",body:JSON.stringify(this.state),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(n){console.log(n),(new h).saveToken(n._id),e.props.onComplete()}).catch(function(n){e.props.onComplete(n)})}},{key:"render",value:function(){var e=this,n=t(26)("./".concat(this.state.avatar,".png"));return o.a.createElement("div",null,o.a.createElement(f.a,{src:n,roundedCircle:!0}),o.a.createElement(v.a,{variant:"outline-primary",onClick:function(){return e.login()}},"Login"))}}]),n}(o.a.Component),w=function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(g.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){null===(new h).token||this.props.history.push("/")}},{key:"onComplete",value:function(e){e&&(console.log(e),(new h).saveToken(null));this.props.history.push("/")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(b,{onComplete:this.onComplete.bind(this)}))}}]),n}(o.a.Component),k=t(112),y=function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(g.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this,n=t(26)("./".concat(this.props.message.mood,".png"));return o.a.createElement("div",null,o.a.createElement(k.a,null,o.a.createElement(k.a.Body,null,o.a.createElement(f.a,{src:n,roundedCircle:!0}),this.props.message.message,this.props.owned&&o.a.createElement(v.a,{variant:"outline-primary",onClick:function(){return e.props.deleteCallback(e.props.message._id)}},"X"))))}}]),n}(o.a.Component),O=t(110),j=t(111),C=t(114),S=(t(20),t(17)),N=(t(101),function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(u.a)(this,Object(m.a)(n).call(this,e))).state={messages:[],anon:{_id:"???????",avatar:"haha"},loading:!0},t}return Object(g.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=new h;null!==n.token?this.login(n.token).then(function(){return e.getMessages()}):this.props.history.push("/")}},{key:"login",value:function(e){var n=this;return fetch("".concat(window.location.origin.toString(),"/api/anon/").concat(e)).then(function(e){return e.json()}).then(function(t){t.length>0&&t[0]._id===e?(console.log(t),n.setState({anon:t[0]}),setInterval(function(){this.getMessages()}.bind(n),3e3)):((new h).saveToken(null),n.props.history.push("/"))}).catch(function(e){(new h).saveToken(null),n.props.history.push("/")})}},{key:"getMessages",value:function(){var e=this;return fetch("".concat(window.location.origin.toString(),"/api/messages")).then(function(e){return e.json()}).then(function(n){n=n.reverse(),console.log(n),e.setState({anon:e.state.anon,messages:n,loading:!1})})}},{key:"handleKeyPress",value:function(e){var n=this;if(13===e.charCode){var t=e.target.value;return e.target.value="",console.log(t),fetch("".concat(window.location.origin.toString(),"/api/message"),{method:"POST",body:JSON.stringify({message:t,anon:this.state.anon._id,mood:this.state.anon.avatar}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){n.getMessages()}).catch(function(e){console.log(e)})}}},{key:"deleteMessage",value:function(e){var n=this;return fetch("".concat(window.location.origin.toString(),"/api/message/").concat(e,"/").concat(this.state.anon._id),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){n.getMessages()}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;if(this.state.loading)return o.a.createElement("div",null,o.a.createElement(O.a,{animation:"grow",variant:"primary"}),o.a.createElement(O.a,{animation:"grow",variant:"secondary"}),o.a.createElement(O.a,{animation:"grow",variant:"success"}),o.a.createElement(O.a,{animation:"grow",variant:"danger"}),o.a.createElement(O.a,{animation:"grow",variant:"warning"}),o.a.createElement(O.a,{animation:"grow",variant:"info"}),o.a.createElement(O.a,{animation:"grow",variant:"light"}),o.a.createElement(O.a,{animation:"grow",variant:"dark"}));var n=t(26)("./".concat(this.state.anon.avatar,".png"));return o.a.createElement(S.Row,{className:"messagesTopRow"},o.a.createElement(S.Col,{m:6,s:6,l:6},o.a.createElement(S.Card,{header:o.a.createElement(S.CardTitle,null),actions:[o.a.createElement("a",null)]},o.a.createElement(f.a,{src:n,roundedCircle:!0}),o.a.createElement(j.a,{onKeyPress:this.handleKeyPress.bind(this),className:"mb-3"},o.a.createElement(j.a.Prepend,null,o.a.createElement(j.a.Text,{id:"inputGroup-sizing-default"},"What's on your mind?")),o.a.createElement(C.a,{"aria-label":"Default","aria-describedby":"inputGroup-sizing-default"})))),this.state.messages.map(function(n){return o.a.createElement(y,{message:n,deleteCallback:e.deleteMessage.bind(e),owned:e.state.anon._id===n.anon})}))}}]),n}(o.a.Component)),T=function(){return o.a.createElement("main",null,o.a.createElement(r.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/",component:p}),o.a.createElement(c.a,{path:"/login",component:w}),o.a.createElement(c.a,{path:"/messages",component:N}))))};t(105);var M=function(){return o.a.createElement(S.Navbar,{brand:o.a.createElement("a",null),alignLinks:"right",className:"navbarcolor"},o.a.createElement("img",{src:"https://i.pinimg.com/originals/20/c7/bc/20c7bcfe40f464961ed209e3deadf8b6.png",className:"navbarlogo",height:"100px",width:"100px"}),o.a.createElement(S.NavItem,{href:"components.html",class:"white-text"},"Log Out"))};t(106);var D=function(){return o.a.createElement(S.Section,null,o.a.createElement(S.Section,{className:"parallax"},o.a.createElement("h1",{className:"title"},"Shower Thoughts")))},x=t(42),_=t.n(x),I=(t(107),function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(g.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e={onOpenStart:function(){console.log("Open Start")},onOpenEnd:function(){console.log("Open End")},onCloseStart:function(){console.log("Close Start")},onCloseEnd:function(){console.log("Close End")},inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"};_.a.Modal.init(this.Modal,e)}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{className:"waves-effect waves-light btn modal-trigger inspirationModalBTN","data-target":"modal1"},"NEED INSPIRATION?"),o.a.createElement("div",{ref:function(n){e.Modal=n},id:"modal1",className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("h4",null,"Modal Header")),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("a",{href:"#",class:"modal-close waves-effect waves-red btn-flat"},"Disagree"),o.a.createElement("a",{href:"#",class:"modal-close waves-effect waves-green btn-flat"},"Agree"))))}}]),n}(a.Component)),P=function(){return o.a.createElement("div",null,o.a.createElement(M,null),o.a.createElement(D,null),o.a.createElement(I,null),o.a.createElement(T,null))};Object(i.render)(o.a.createElement(r.a,null,o.a.createElement(P,null)),document.getElementById("root"))},26:function(e,n,t){var a={"./grinning.png":49,"./neutral.png":50,"./rolling.png":51,"./slightly.png":52,"./sunglasses.png":53,"./thinking.png":54};function o(e){var n=i(e);return t(n)}function i(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=26},43:function(e,n,t){e.exports=t(108)},48:function(e,n,t){},49:function(e,n,t){e.exports=t.p+"static/media/grinning.a5c4c868.png"},50:function(e,n,t){e.exports=t.p+"static/media/neutral.a7fe3123.png"},51:function(e,n,t){e.exports=t.p+"static/media/rolling.8d0d9682.png"},52:function(e,n,t){e.exports=t.p+"static/media/slightly.f8af4936.png"},53:function(e,n,t){e.exports=t.p+"static/media/sunglasses.4238fe56.png"},54:function(e,n,t){e.exports=t.p+"static/media/thinking.872be34d.png"}},[[43,1,2]]]);
//# sourceMappingURL=main.63f28c05.chunk.js.map